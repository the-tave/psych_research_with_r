<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data munging with dplyr | Psychological Research with R</title>
  <meta name="description" content="<p>This is an online introduction to R targetted especially at psychologists.
It should guide the reader through the first challenges in working with R
and provide the tools and skills to write a whole report with data analysis and visualization
directly in R and R Markdown.</p>" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data munging with dplyr | Psychological Research with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is an online introduction to R targetted especially at psychologists.
It should guide the reader through the first challenges in working with R
and provide the tools and skills to write a whole report with data analysis and visualization
directly in R and R Markdown.</p>" />
  <meta name="github-repo" content="the-tave/psych_research_with_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data munging with dplyr | Psychological Research with R" />
  
  <meta name="twitter:description" content="<p>This is an online introduction to R targetted especially at psychologists.
It should guide the reader through the first challenges in working with R
and provide the tools and skills to write a whole report with data analysis and visualization
directly in R and R Markdown.</p>" />
  

<meta name="author" content="Anni Tave Overlander" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="best-practice.html"/>
<link rel="next" href="ggplot2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="www/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li>
<a href="./"><i class="fa-solid fa-mug-hot" style="color: #800080;"></i> Psychological Research with R 
<i class="fa-solid fa-mug-hot" style="color: #800080;"></i></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about"><i class="fa fa-check"></i>About</a></li>
</ul></li>
<li class="part"><span><b>I First Steps</b></span></li>
<li class="chapter" data-level="1" data-path="intro-and-installation.html"><a href="intro-and-installation.html"><i class="fa fa-check"></i><b>1</b> Intro and Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-and-installation.html"><a href="intro-and-installation.html#what-is-r-what-is-r-studio"><i class="fa fa-check"></i><b>1.1</b> What is R? What is R Studio?</a></li>
<li class="chapter" data-level="1.2" data-path="intro-and-installation.html"><a href="intro-and-installation.html#installing-r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R and R Studio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro-and-installation.html"><a href="intro-and-installation.html#workflow"><i class="fa fa-check"></i><b>1.2.1</b> Workflow</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro-and-installation.html"><a href="intro-and-installation.html#installing-packages"><i class="fa fa-check"></i><b>1.3</b> Installing Packages</a>
<ul>
<li class="chapter" data-level="" data-path="intro-and-installation.html"><a href="intro-and-installation.html#posit-cloud"><i class="fa fa-check"></i>Posit Cloud</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-and-installation.html"><a href="intro-and-installation.html#wrap-up-further-resources"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> R Basics &amp; Error Messages</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#basics-1"><i class="fa fa-check"></i><b>2.1</b> Basics</a>
<ul>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#basic-functions"><i class="fa fa-check"></i>Basic Functions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#logic"><i class="fa fa-check"></i><b>2.2</b> Logic</a></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#reading-error-messages"><i class="fa fa-check"></i><b>2.3</b> Reading Error Messages</a>
<ul>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#error-unexpected-x-in-y"><i class="fa fa-check"></i><em>Error: unexpected 'X' in "Y"</em></a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#error-object-a-not-found"><i class="fa fa-check"></i><em>Error: object 'A' not found</em></a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#error-r-does-nothing-after-running-a-command"><i class="fa fa-check"></i><em>Error</em>: R does nothing after running a command</a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#pipe"><i class="fa fa-check"></i>The pipe operator <code>|&gt;</code> or <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="" data-path="basics.html"><a href="basics.html#wrap-up-further-resources-1"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="best-practice.html"><a href="best-practice.html"><i class="fa fa-check"></i><b>3</b> Best Practice</a>
<ul>
<li class="chapter" data-level="3.1" data-path="best-practice.html"><a href="best-practice.html#varnames"><i class="fa fa-check"></i><b>3.1</b> Naming Conventions</a></li>
<li class="chapter" data-level="3.2" data-path="best-practice.html"><a href="best-practice.html#exercise-creating-data"><i class="fa fa-check"></i><b>3.2</b> Exercise: Creating Data</a></li>
<li class="chapter" data-level="3.3" data-path="best-practice.html"><a href="best-practice.html#working-directories"><i class="fa fa-check"></i><b>3.3</b> Working Directories</a></li>
<li class="chapter" data-level="3.4" data-path="best-practice.html"><a href="best-practice.html#r-projects-r-project"><i class="fa fa-check"></i><b>3.4</b> R Projects <img src="img/rproj.png" height="30" alt="R Project" /></a>
<ul>
<li class="chapter" data-level="" data-path="best-practice.html"><a href="best-practice.html#exercise"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="best-practice.html"><a href="best-practice.html#make-r-your-own"><i class="fa fa-check"></i><b>3.5</b> Make R your own</a></li>
<li class="chapter" data-level="" data-path="best-practice.html"><a href="best-practice.html#wrap-up-further-resources-2"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
<li class="chapter" data-level="" data-path="best-practice.html"><a href="best-practice.html#working-with-version-control"><i class="fa fa-check"></i>Working with Version Control</a></li>
</ul></li>
<li class="part"><span><b>II Into the <code>tidyverse</code></b></span></li>
<li class="chapter" data-level="4" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4</b> Data munging with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr.html"><a href="dplyr.html#working-with-packages"><i class="fa fa-check"></i><b>4.1</b> Working with packages</a></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html#the-tidyverse"><i class="fa fa-check"></i><b>4.2</b> The tidyverse</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr.html"><a href="dplyr.html#what-is-dplyr-dplyr-logo"><i class="fa fa-check"></i><b>4.2.1</b> What is <code>dplyr</code>? <img src="img/dplyr.png" height="80" alt="dplyr logo" /></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr.html"><a href="dplyr.html#intro-iris"><i class="fa fa-check"></i><b>4.3</b> Intro to <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#imagine..."><i class="fa fa-check"></i>Imagine...</a></li>
<li class="chapter" data-level="4.3.1" data-path="dplyr.html"><a href="dplyr.html#filter"><i class="fa fa-check"></i><b>4.3.1</b> Filter</a></li>
<li class="chapter" data-level="4.3.2" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>4.3.2</b> Select</a></li>
<li class="chapter" data-level="4.3.3" data-path="dplyr.html"><a href="dplyr.html#rename"><i class="fa fa-check"></i><b>4.3.3</b> Rename</a></li>
<li class="chapter" data-level="4.3.4" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>4.3.4</b> Mutate</a></li>
<li class="chapter" data-level="4.3.5" data-path="dplyr.html"><a href="dplyr.html#group_by-summarize"><i class="fa fa-check"></i><b>4.3.5</b> group_by &amp; summarize</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#exercises-1"><i class="fa fa-check"></i>Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#data-munging"><i class="fa fa-check"></i>Data Munging</a></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#group-statistics"><i class="fa fa-check"></i>Group Statistics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#piping-hot"><i class="fa fa-check"></i>Piping Hot %&gt;%</a></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#wrapupdplyr"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>5</b> Pretty plots with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot2.html"><a href="ggplot2.html#data-visalization"><i class="fa fa-check"></i><b>5.1</b> Data Visalization <i class="fa-solid fa-chart-line" style="color: darkred;"></i></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="ggplot2.html"><a href="ggplot2.html#example-sine-cosine"><i class="fa fa-check"></i><b>5.1.1</b> Example: Sine &amp; Cosine</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="ggplot2.html"><a href="ggplot2.html#what-is-ggplot2"><i class="fa fa-check"></i><b>5.2</b> What is <code>ggplot2</code>?</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#ggplot"><i class="fa fa-check"></i><code>ggplot()</code></a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#geom_xyz"><i class="fa fa-check"></i><code>geom_XYZ()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="ggplot2.html"><a href="ggplot2.html#your-first-bar-plot"><i class="fa fa-check"></i><b>5.3</b> Your First Bar Plot</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot2.html"><a href="ggplot2.html#making-plots-prettier"><i class="fa fa-check"></i><b>5.3.1</b> Making Plots Prettier</a></li>
<li class="chapter" data-level="5.3.2" data-path="ggplot2.html"><a href="ggplot2.html#example-bar-plot-with-color-and-fill"><i class="fa fa-check"></i><b>5.3.2</b> Example: Bar Plot with color and fill</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot2.html"><a href="ggplot2.html#static-vs.-dynamic-aesthetics"><i class="fa fa-check"></i><b>5.4</b> Static vs. Dynamic Aesthetics</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="ggplot2.html"><a href="ggplot2.html#exercise-1"><i class="fa fa-check"></i><b>5.4.1</b> Exercise</a></li>
<li class="chapter" data-level="5.4.2" data-path="ggplot2.html"><a href="ggplot2.html#solution"><i class="fa fa-check"></i><b>5.4.2</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="ggplot2.html"><a href="ggplot2.html#adding-labels-and-themes"><i class="fa fa-check"></i><b>5.5</b> Adding labels and themes</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2.html"><a href="ggplot2.html#bivariate-visualizations"><i class="fa fa-check"></i><b>5.6</b> Bivariate Visualizations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="ggplot2.html"><a href="ggplot2.html#boxplot-example"><i class="fa fa-check"></i><b>5.6.1</b> Boxplot Example</a></li>
<li class="chapter" data-level="5.6.2" data-path="ggplot2.html"><a href="ggplot2.html#exercise-boxplot"><i class="fa fa-check"></i><b>5.6.2</b> Exercise: Boxplot</a></li>
<li class="chapter" data-level="5.6.3" data-path="ggplot2.html"><a href="ggplot2.html#inspiration-colors-and-palettes"><i class="fa fa-check"></i><b>5.6.3</b> Inspiration: colors and palettes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#wrap-up-further-resources-3"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="part"><span><b>III The Nitty-Gritty</b></span></li>
<li class="chapter" data-level="6" data-path="exdata.html"><a href="exdata.html"><i class="fa fa-check"></i><b>6</b> Working with existing Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="exdata.html"><a href="exdata.html#different-types-of-data-sources"><i class="fa fa-check"></i><b>6.1</b> Different types of data sources</a></li>
<li class="chapter" data-level="6.2" data-path="exdata.html"><a href="exdata.html#reading-in-the-data"><i class="fa fa-check"></i><b>6.2</b> Reading in the data</a>
<ul>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#generated-code"><i class="fa fa-check"></i>Generated Code</a></li>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#basic-edits"><i class="fa fa-check"></i>Basic Edits <i class="fa-solid fa-paintbrush" style="color: darkgreen;"></i></a></li>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#result"><i class="fa fa-check"></i>Result</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="exdata.html"><a href="exdata.html#codebook"><i class="fa fa-check"></i><b>6.3</b> Codebook</a></li>
<li class="chapter" data-level="6.4" data-path="exdata.html"><a href="exdata.html#descriptives"><i class="fa fa-check"></i><b>6.4</b> Descriptives</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="exdata.html"><a href="exdata.html#group_by-summarize-1"><i class="fa fa-check"></i><b>6.4.1</b> group_by &amp; summarize</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="exdata.html"><a href="exdata.html#missing-data"><i class="fa fa-check"></i><b>6.5</b> Missing Data</a></li>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#exercises-2"><i class="fa fa-check"></i>Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#group_by-summarize-2"><i class="fa fa-check"></i>group_by &amp; summarize</a></li>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#prepare-seminar-data"><i class="fa fa-check"></i>Prepare seminar data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exdata.html"><a href="exdata.html#wrap-up-further-resources-4"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html"><i class="fa fa-check"></i><b>7</b> Loops and Conditionals</a>
<ul>
<li class="chapter" data-level="7.1" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#what-is-a-loop"><i class="fa fa-check"></i><b>7.1</b> What is a loop?</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#what-are-conditionals"><i class="fa fa-check"></i><b>7.1.1</b> What are conditionals?</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#exercise-what-should-i-use"><i class="fa fa-check"></i><b>7.2</b> Exercise: What should I use?</a></li>
<li class="chapter" data-level="7.3" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#for-loop"><i class="fa fa-check"></i><b>7.3</b> for-loop</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#example"><i class="fa fa-check"></i><b>7.3.1</b> Example</a></li>
<li class="chapter" data-level="7.3.2" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#conditionals-if---else"><i class="fa fa-check"></i><b>7.3.2</b> Conditionals: If - else</a></li>
<li class="chapter" data-level="7.3.3" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#conditionals-if---else-1"><i class="fa fa-check"></i><b>7.3.3</b> Conditionals: If - else</a></li>
<li class="chapter" data-level="7.3.4" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#exercise-2"><i class="fa fa-check"></i><b>7.3.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#same-function-different-variables"><i class="fa fa-check"></i><b>7.4</b> Same function, different variables</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#more-sophisticated"><i class="fa fa-check"></i><b>7.4.1</b> More sophisticated</a></li>
<li class="chapter" data-level="7.4.2" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#with-saving-values"><i class="fa fa-check"></i><b>7.4.2</b> With saving values</a></li>
<li class="chapter" data-level="7.4.3" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#exercise-seminar-data"><i class="fa fa-check"></i><b>7.4.3</b> Exercise: Seminar Data</a></li>
<li class="chapter" data-level="7.4.4" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#solution-1"><i class="fa fa-check"></i><b>7.4.4</b> Solution</a></li>
<li class="chapter" data-level="7.4.5" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#checking-whats-going-on"><i class="fa fa-check"></i><b>7.4.5</b> Checking What's Going On</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#loop-with-conditional"><i class="fa fa-check"></i><b>7.5</b> Loop with Conditional</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#elements"><i class="fa fa-check"></i><b>7.5.1</b> Elements</a></li>
<li class="chapter" data-level="7.5.2" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#and-a-more-complicated-outlook..."><i class="fa fa-check"></i><b>7.5.2</b> And a more complicated outlook...</a></li>
<li class="chapter" data-level="7.5.3" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#result-1"><i class="fa fa-check"></i><b>7.5.3</b> Result</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="loops-and-conditionals.html"><a href="loops-and-conditionals.html#wrap-up-further-resources-5"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="difference-statistics.html"><a href="difference-statistics.html"><i class="fa fa-check"></i><b>8</b> Difference Statistics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="difference-statistics.html"><a href="difference-statistics.html#statistics-re-cap"><i class="fa fa-check"></i><b>8.1</b> Statistics Re-cap <i class="fa-solid fa-graduation-cap" style="color: darkred;"></i></a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="difference-statistics.html"><a href="difference-statistics.html#pre-requisites"><i class="fa fa-check"></i><b>8.1.1</b> Pre-Requisites</a></li>
<li class="chapter" data-level="8.1.2" data-path="difference-statistics.html"><a href="difference-statistics.html#statistical-significnace"><i class="fa fa-check"></i><b>8.1.2</b> Statistical Significnace</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="difference-statistics.html"><a href="difference-statistics.html#chi2"><i class="fa fa-check"></i><b>8.2</b> <span class="math inline">\(\chi^2\)</span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="difference-statistics.html"><a href="difference-statistics.html#how-to-in-r"><i class="fa fa-check"></i><b>8.2.1</b> How to in R</a></li>
<li class="chapter" data-level="8.2.2" data-path="difference-statistics.html"><a href="difference-statistics.html#exercise-3"><i class="fa fa-check"></i><b>8.2.2</b> Exercise <i class="fa-solid fa-ghost" style="color: #dcdcdc;"></i> <i class="fa-solid fa-music"></i></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="difference-statistics.html"><a href="difference-statistics.html#t-test"><i class="fa fa-check"></i><b>8.3</b> t-Test</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="difference-statistics.html"><a href="difference-statistics.html#test-statistic-t"><i class="fa fa-check"></i><b>8.3.1</b> Test statistic <em>t</em></a></li>
<li class="chapter" data-level="8.3.2" data-path="difference-statistics.html"><a href="difference-statistics.html#how-to-in-r-1"><i class="fa fa-check"></i><b>8.3.2</b> How to in R</a></li>
<li class="chapter" data-level="8.3.3" data-path="difference-statistics.html"><a href="difference-statistics.html#examples"><i class="fa fa-check"></i><b>8.3.3</b> Examples</a></li>
<li class="chapter" data-level="8.3.4" data-path="difference-statistics.html"><a href="difference-statistics.html#exercise-4"><i class="fa fa-check"></i><b>8.3.4</b> Exercise <i class="fa-solid fa-computer"></i></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="difference-statistics.html"><a href="difference-statistics.html#anova"><i class="fa fa-check"></i><b>8.4</b> ANOVA</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="difference-statistics.html"><a href="difference-statistics.html#how-to---theoretically"><i class="fa fa-check"></i><b>8.4.1</b> How to - theoretically</a></li>
<li class="chapter" data-level="" data-path="difference-statistics.html"><a href="difference-statistics.html#example-music-genre-and-loudness"><i class="fa fa-check"></i>Example: Music genre and loudness <i class="fa-solid fa-music"></i></a></li>
<li class="chapter" data-level="8.4.2" data-path="difference-statistics.html"><a href="difference-statistics.html#addendum-for-demonstration-only-bootstrapped-data-for-larger-sample-size"><i class="fa fa-check"></i><b>8.4.2</b> Addendum for demonstration only: Bootstrapped Data for larger sample size</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="difference-statistics.html"><a href="difference-statistics.html#reporting-with-the-apa-papaja-packages"><i class="fa fa-check"></i><b>8.5</b> Reporting with the <code>apa</code> &amp; <code>papaja</code> packages</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="difference-statistics.html"><a href="difference-statistics.html#usage"><i class="fa fa-check"></i><b>8.5.1</b> Usage</a></li>
<li class="chapter" data-level="8.5.2" data-path="difference-statistics.html"><a href="difference-statistics.html#usage-in-r-markdown"><i class="fa fa-check"></i><b>8.5.2</b> Usage in R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="difference-statistics.html"><a href="difference-statistics.html#wrap-up-further-resources-6"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="association-statistics.html"><a href="association-statistics.html"><i class="fa fa-check"></i><b>9</b> Association Statistics</a>
<ul>
<li class="chapter" data-level="9.1" data-path="association-statistics.html"><a href="association-statistics.html#correlation"><i class="fa fa-check"></i><b>9.1</b> Correlation</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="association-statistics.html"><a href="association-statistics.html#guess-the-correlation"><i class="fa fa-check"></i><b>9.1.1</b> Guess the correlation!</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="association-statistics.html"><a href="association-statistics.html#correlation-in-r"><i class="fa fa-check"></i><b>9.2</b> Correlation in R</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="association-statistics.html"><a href="association-statistics.html#handling-missing-data"><i class="fa fa-check"></i><b>9.2.1</b> Handling missing data</a></li>
<li class="chapter" data-level="9.2.2" data-path="association-statistics.html"><a href="association-statistics.html#exercise-5"><i class="fa fa-check"></i><b>9.2.2</b> Exercise</a></li>
<li class="chapter" data-level="9.2.3" data-path="association-statistics.html"><a href="association-statistics.html#quiz"><i class="fa fa-check"></i><b>9.2.3</b> Quiz</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="association-statistics.html"><a href="association-statistics.html#linear-regression"><i class="fa fa-check"></i><b>9.3</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="association-statistics.html"><a href="association-statistics.html#build-the-model"><i class="fa fa-check"></i><b>9.3.1</b> Build the model</a></li>
<li class="chapter" data-level="9.3.2" data-path="association-statistics.html"><a href="association-statistics.html#visual-inspection"><i class="fa fa-check"></i><b>9.3.2</b> Visual Inspection</a></li>
<li class="chapter" data-level="9.3.3" data-path="association-statistics.html"><a href="association-statistics.html#build-the-model-1"><i class="fa fa-check"></i><b>9.3.3</b> Build the model</a></li>
<li class="chapter" data-level="9.3.4" data-path="association-statistics.html"><a href="association-statistics.html#analyze-the-model"><i class="fa fa-check"></i><b>9.3.4</b> Analyze the model</a></li>
<li class="chapter" data-level="9.3.5" data-path="association-statistics.html"><a href="association-statistics.html#exercise-6"><i class="fa fa-check"></i><b>9.3.5</b> Exercise <i class="fa-regular fa-hourglass-half"  style="color: #dcdcdc;"></i> <i class="fa-solid fa-laptop-code"  style="color: #dcdcdc;"></i></a></li>
<li class="chapter" data-level="9.3.6" data-path="association-statistics.html"><a href="association-statistics.html#a-word-to-the-wise"><i class="fa fa-check"></i><b>9.3.6</b> A word to the wise</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="association-statistics.html"><a href="association-statistics.html#anova-exercise"><i class="fa fa-check"></i><b>9.4</b> ANOVA Exercise</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="association-statistics.html"><a href="association-statistics.html#exercise-7"><i class="fa fa-check"></i><b>9.4.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="association-statistics.html"><a href="association-statistics.html#wrap-up-further-resources-7"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="part"><span><b>IV Reporting in R</b></span></li>
<li class="chapter" data-level="10" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>10</b> R Markdown</a>
<ul>
<li class="chapter" data-level="10.1" data-path="r-markdown.html"><a href="r-markdown.html#yaml-header-yet-another-markdown-language"><i class="fa fa-check"></i><b>10.1</b> YAML header (<em>Yet Another Markdown Language</em>)</a></li>
<li class="chapter" data-level="10.2" data-path="r-markdown.html"><a href="r-markdown.html#markdown-basics"><i class="fa fa-check"></i><b>10.2</b> Markdown Basics</a>
<ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i>Tables</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="r-markdown.html"><a href="r-markdown.html#special-features"><i class="fa fa-check"></i><b>10.3</b> Special Features</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="r-markdown.html"><a href="r-markdown.html#section"><i class="fa fa-check"></i><b>10.3.1</b> </a></li>
<li class="chapter" data-level="10.3.2" data-path="r-markdown.html"><a href="r-markdown.html#html"><i class="fa fa-check"></i><b>10.3.2</b> HTML</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="r-markdown.html"><a href="r-markdown.html#including-r"><i class="fa fa-check"></i><b>10.4</b> Including R</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>10.4.1</b> Code Chunks</a></li>
<li class="chapter" data-level="10.4.2" data-path="r-markdown.html"><a href="r-markdown.html#including-links-images"><i class="fa fa-check"></i><b>10.4.2</b> Including Links &amp; Images</a></li>
<li class="chapter" data-level="10.4.3" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>10.4.3</b> Inline Code</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#wrap-up-further-resources-8"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html"><i class="fa fa-check"></i><b>11</b> The Power of R &amp; R Markdown</a>
<ul>
<li class="chapter" data-level="11.1" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html#the-papaja-package"><i class="fa fa-check"></i><b>11.1</b> The <code>papaja</code> Package</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html#markdown-templates"><i class="fa fa-check"></i><b>11.1.1</b> Markdown Templates</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html#taking-full-advantage-of-r"><i class="fa fa-check"></i><b>11.2</b> Taking full advantage of R</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html#walkthrough"><i class="fa fa-check"></i><b>11.2.1</b> Walkthrough</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html#exercise-8"><i class="fa fa-check"></i>Exercise</a></li>
<li class="chapter" data-level="" data-path="the-power-of-r-r-markdown.html"><a href="the-power-of-r-r-markdown.html#wrap-up-further-resources-9"><i class="fa fa-check"></i>Wrap-Up &amp; Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="wrap-up.html"><a href="wrap-up.html"><i class="fa fa-check"></i>Wrap Up</a>
<ul>
<li class="chapter" data-level="" data-path="wrap-up.html"><a href="wrap-up.html#many-people-are-working-on-many-great-projects."><i class="fa fa-check"></i>Many people are working on many great projects.</a></li>
<li class="chapter" data-level="" data-path="wrap-up.html"><a href="wrap-up.html#r-can-be-hard."><i class="fa fa-check"></i>R can be hard.</a></li>
<li class="chapter" data-level="" data-path="wrap-up.html"><a href="wrap-up.html#but-its-worth-it."><i class="fa fa-check"></i>... but it's worth it.</a></li>
<li class="chapter" data-level="" data-path="wrap-up.html"><a href="wrap-up.html#r-is-really-fun"><i class="fa fa-check"></i>R is really fun!</a></li>
<li class="chapter" data-level="" data-path="wrap-up.html"><a href="wrap-up.html#outlook"><i class="fa fa-check"></i>Outlook</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="practice.html"><a href="practice.html"><i class="fa fa-check"></i>Practice</a>
<ul>
<li class="chapter" data-level="11.3" data-path="practice.html"><a href="practice.html#quiz-r"><i class="fa fa-check"></i><b>11.3</b> Quiz: R</a></li>
<li class="chapter" data-level="11.4" data-path="practice.html"><a href="practice.html#quiz-r-markdown"><i class="fa fa-check"></i><b>11.4</b> Quiz: R Markdown</a></li>
<li class="chapter" data-level="11.5" data-path="practice.html"><a href="practice.html#loops-write-a-for-loop-that-outputs-the-first-x-numbers-of-the-fibonacci-sequence-golden-ratio"><i class="fa fa-check"></i><b>11.5</b> Loops: Write a for-loop that outputs the first X numbers of the Fibonacci sequence ("golden ratio")</a></li>
<li class="chapter" data-level="11.6" data-path="practice.html"><a href="practice.html#rmarkdown-start-your-document-in-a-certain-way-that-matches-the-template"><i class="fa fa-check"></i><b>11.6</b> RMarkdown: Start your document in a certain way that matches the template!</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html"><i class="fa fa-check"></i>Toolbox</a>
<ul>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#shortcuts"><i class="fa fa-check"></i>Keyboard shortcuts to make your life easier</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#reading-in-data"><i class="fa fa-check"></i>Reading in Data</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#logic-1"><i class="fa fa-check"></i>Logic</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#mif"><i class="fa fa-check"></i>Most important <code>dplyr</code> functions</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#lop"><i class="fa fa-check"></i>Incomplete List of Useful Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Psychological Research with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data munging with <code>dplyr</code><a href="dplyr.html#dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<script src="https://kit.fontawesome.com/0e67562c4f.js" crossorigin="anonymous"></script>
<!-- <link rel="stylesheet" href="./img/fontawesome.min.css"> -->
<p>In this chapter you will learn about working with packages, which I find similar to teaching your R new tricks. <i class="fa-solid fa-dragon" style="color: darkred;"></i>
I will also introduce you to the <code>tidyverse</code> - a collection of packages and why I strongly suggest to familiarize oneself with a bunch of them.
Spoiler: It will make your life a lot easier.</p>
<div id="working-with-packages" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Working with packages<a href="dplyr.html#working-with-packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First off, when you stick to the metaphor a package being a collection of tricks to teach your R, then you will teach the tricks once and remind R that it knows the tricks every time you want to use them.
In more real life terms, you will install a package once and load it in each new session.
This is important to remember because installing packages is one of the few things you will <em>only</em> want to do in your console - NOT in any of your scripts.
Nothing bad will happen if you do, but it takes a very long time and it will test both your own patience and that of your computer.</p>
<p>Generally, packages can be installed with the <code>install.packages()</code> function.
It needs the package name in quotes as input in the parentheses, e.g. <code>install.packages("dplyr")</code>.
This means the package is now on your computer but you still need to make it available.
The easiest way to achieve that is to load the whole package using the <code>library()</code> command.
This will usually be done inside a script where you want to use functions from that package.
Later in this chapter, when we look at dplyr functions on the <code>iris</code> data in Section <a href="dplyr.html#intro-iris">4.3</a>, you will see a code chunk as a prototype of a typical beginning of an R script.</p>
<p>While <code>library()</code> makes all functions from a package available, you can also only load specific functions right when you want to use them.
This works with the notation <code>package::function()</code> and is particularly useful if (1) the package is extremely large, takes a long time to load and/or you really only need the one function or (b) the function name you want to use is not unique, i.e. there are several packages that contain a function of that name.
For example, the function <em>filter</em> exists in more than one package, so you might use <code>dplyr::filter()</code> in your code to make explicit that you want to use the <code>filter()</code> function from the <code>dplyr</code> package.</p>
<p><i class="fa-solid fa-lightbulb" style="color: #a34c21;"></i><i style="color: #a34c21;"> When this is the case, you will get the message "The following objects are masked from..." in the console when you load the package. This is also good to keep in mind if you run into unexpected errors - maybe you meant to use the function from another package but R is using the one you loaded last? </i></p>
<p>In the interest of creating reproducible code, it can also make sense to use the <code>package::function()</code> notation, so you can explicitly show others which function you used.</p>
<p>At a glance:</p>
<ul>
<li>Install packages with <code>install.packages()</code> only once in the console!</li>
<li>Load packages with <code>library()</code> every time you load a script or start a new session
<ul>
<li>Usually in the script, but also in the console</li>
</ul></li>
<li>Specific function from a package: <code>package::function()</code>
<ul>
<li>Use if you just need that one function once and don't want load the entire package</li>
<li>Or to explicitly show the according package</li>
<li>Or the function name is also in other packages (e.g. "filter" is usually <code>dplyr::filter</code>, but sometimes <code>stats::filter</code>)</li>
</ul></li>
</ul>
</div>
<div id="the-tidyverse" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> The tidyverse<a href="dplyr.html#the-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>The tidyverse is an opinionated <strong>collection of R packages designed for data science</strong>. All packages share an underlying design philosophy, grammar, and data structures. (<a href="tidyverse.org" target="_blank">tidyverse.org</a>)</p>
</blockquote>
<p>So packages are pretty cool: They usually come from people who had a specific problem, found a solution and decided to share it with others so they can more easily fix new problems.
Of course everyone has a different preference on how to work, which is why not every package and function will be intuitive to everyone.
That is also why the definition of an "opinionated collection of R packages" is so fitting because the <code>tidyverse</code> is a framework consisting of many different packages that the authors find intuitive and useful.</p>
<div class="float">
<img src="img/hexagons.png" height="200" alt="Hex Logos" />
<div class="figcaption">Hex Logos</div>
</div>
<p>Incidentally, I agree and I will show you why.
If you figure out at some point that your prefer another way - that's great, but the tidyverse is a solid starting point for most data science needs in psychology.</p>
<p>The structure of the <code>tidyverse</code> packages is very clear and they each serve a distinct purpose.
Taking a real-life workflow as inspiration, we will first get to know <code>dplyr</code>, a package for cleaning up data and editing everything to your needs in this chapter and later get to know <code>ggplot2</code> as a package for data visualization in Chapter <a href="ggplot2.html#ggplot2">5</a>.
One of the big advantages of the <code>tidyverse</code> packages is that the can be combined very easily, creating easy-to-read and -write workflows that you will probably still be able to understand one year after you wrote it.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>You can install the whole <code>tidyverse</code> at once, which will take a little while as it contains a lot of individual packages.
Generally, I would recommend installing them once, but loading packages individually when you need them, because also loading the bulk of packages takes a lot of time.</p>
<blockquote>
<p><code>install.packages("tidyverse")</code></p>
</blockquote>
<div id="what-is-dplyr-dplyr-logo" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> What is <code>dplyr</code>? <img src="img/dplyr.png" height="80" alt="dplyr logo" /><a href="dplyr.html#what-is-dplyr-dplyr-logo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>dplyr</code> package is probably the best and most important package in R <em>imho</em>.
It is a powerful tool for editing data in data frames and a great way to keep your workflow clear and reproducible.
It has very intuitively named functions that on their own already serve most purposes that you will commonly need to properly work with your data.
If you haven't already, now would be a good time to install <code>dplyr</code> and load it into a practice script:</p>
<blockquote>
<p><code>install.packages("dplyr")</code> <span class="math inline">\(\rightarrow\)</span> <code>library(dplyr)</code></p>
</blockquote>
<p>In the following, we will use a data example to get to know some of the most important functions.
Try to follow along and remember that you can always get more info on a function with a question mark in front of the function name in the console (here best to add the package name), e.g. <code>?dplyr::filter</code>.
If you want more general information on the whole package you can use the command <code>browseVignettes(package = "dplyr")</code> in the console.
Also check the <a href="dplyr.html#wrapupdplyr">further resources</a> and an overview of the <a href="toolbox.html#mif">most important dplyr functions</a>.</p>
</div>
</div>
<div id="intro-iris" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Intro to <code>dplyr</code><a href="dplyr.html#intro-iris" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="float">
<img src="img/iris-setosa.png" height="150" alt="Types of Iris Flowers" />
<div class="figcaption">Types of Iris Flowers</div>
</div>
<p>We introduced the <code>iris</code> data set in Section <a href="basics.html#basics">2</a> - a native R data set that you can just access without needing to load anything.
It contains information on iris flowers of different species and we will use the <code>glimpse()</code> function from <code>dplyr</code> to get a first overview of the data we have at hand:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="dplyr.html#cb31-1" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(iris)</span>
<span id="cb31-2"><a href="dplyr.html#cb31-2" tabindex="-1"></a><span class="co"># Rows: 150</span></span>
<span id="cb31-3"><a href="dplyr.html#cb31-3" tabindex="-1"></a><span class="co"># Columns: 5</span></span>
<span id="cb31-4"><a href="dplyr.html#cb31-4" tabindex="-1"></a><span class="co"># $ Sepal.Length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5.4, 4.8, 4.8, 4.3, 5.8, 5.7, 5.4, 5.1, 5.7, 5.1, 5.4, 5.1, 4.6, 5.1, 4.8,…</span></span>
<span id="cb31-5"><a href="dplyr.html#cb31-5" tabindex="-1"></a><span class="co"># $ Sepal.Width  &lt;dbl&gt; 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.4, 3.0, 3.0, 4.0, 4.4, 3.9, 3.5, 3.8, 3.8, 3.4, 3.7, 3.6, 3.3, 3.4,…</span></span>
<span id="cb31-6"><a href="dplyr.html#cb31-6" tabindex="-1"></a><span class="co"># $ Petal.Length &lt;dbl&gt; 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5, 1.5, 1.6, 1.4, 1.1, 1.2, 1.5, 1.3, 1.4, 1.7, 1.5, 1.7, 1.5, 1.0, 1.7, 1.9,…</span></span>
<span id="cb31-7"><a href="dplyr.html#cb31-7" tabindex="-1"></a><span class="co"># $ Petal.Width  &lt;dbl&gt; 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1, 0.2, 0.2, 0.1, 0.1, 0.2, 0.4, 0.4, 0.3, 0.3, 0.3, 0.2, 0.4, 0.2, 0.5, 0.2,…</span></span>
<span id="cb31-8"><a href="dplyr.html#cb31-8" tabindex="-1"></a><span class="co"># $ Species      &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, setosa, seto…</span></span></code></pre></div>
<div id="imagine..." class="section level3 unnumbered hasAnchor">
<h3>Imagine...<a href="dplyr.html#imagine..." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with "real" data, aka survey or experimental data, we will usually need to reshape, filter and generally edit the data a bit.
This may sound a bit sketchy at first, but we do not want to fake or change any data, we just want to ensure that we have the highest-quality data set to work with that we can.</p>
<p>In the example we will be working with, we have the following three goals for the <i class="fa-solid fa-seedling" style="color: purple;"></i> data:</p>
<ol style="list-style-type: decimal">
<li>We only want data from species "virginica".</li>
<li>We are interested in sepal length.</li>
<li>We want to adjust variable names.</li>
<li>We later also want the species to be capitalized in our data &amp; to add a new binary variable for whether a flower's petals are longer than 5.5 cm (1) or not (0).</li>
</ol>
<p>Using <code>dplyr</code> functions, we can easily achieve all these goals in a few lines of code.
We will go more into depth</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="dplyr.html#cb32-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb32-2"><a href="dplyr.html#cb32-2" tabindex="-1"></a></span>
<span id="cb32-3"><a href="dplyr.html#cb32-3" tabindex="-1"></a>iris_virginica <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="co"># create new data set as copy</span></span>
<span id="cb32-4"><a href="dplyr.html#cb32-4" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># 1. only virginica</span></span>
<span id="cb32-5"><a href="dplyr.html#cb32-5" tabindex="-1"></a>  <span class="fu">select</span>(Petal.Length, Species)  <span class="sc">%&gt;%</span> <span class="co"># 2. select columns </span></span>
<span id="cb32-6"><a href="dplyr.html#cb32-6" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">plength =</span> Petal.Length) <span class="co"># 3. rename variable/column</span></span>
<span id="cb32-7"><a href="dplyr.html#cb32-7" tabindex="-1"></a></span>
<span id="cb32-8"><a href="dplyr.html#cb32-8" tabindex="-1"></a><span class="fu">str</span>(iris_virginica)</span>
<span id="cb32-9"><a href="dplyr.html#cb32-9" tabindex="-1"></a><span class="co"># &#39;data.frame&#39;: 50 obs. of  2 variables:</span></span>
<span id="cb32-10"><a href="dplyr.html#cb32-10" tabindex="-1"></a><span class="co">#  $ plength: num  6 5.1 5.9 5.6 5.8 6.6 4.5 6.3 5.8 6.1 ...</span></span>
<span id="cb32-11"><a href="dplyr.html#cb32-11" tabindex="-1"></a><span class="co">#  $ Species: Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...</span></span></code></pre></div>
</div>
<div id="filter" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Filter<a href="dplyr.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="img/filter.png" height="100" alt="filter scheme" />
<div class="figcaption">filter scheme</div>
</div>
<ul>
<li>Filters data by a <strong>value in a variable</strong>
<ul>
<li>With filter we <strong>keep only certain rows</strong> in our data</li>
</ul></li>
<li>Needs <strong>logical operators</strong> as input
<ul>
<li>"keep only cases where variable x has value abc"</li>
<li>Can also be used with the ! to drop certain cases</li>
<li>Drop NAs: <code>data %&gt;% filter(!is.na(variable))</code></li>
</ul></li>
</ul>
</div>
<div id="select" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Select<a href="dplyr.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="img/select.png" height="100" alt="select scheme" />
<div class="figcaption">select scheme</div>
</div>
<ul>
<li>Selects <strong>variables based on their names</strong>
<ul>
<li>With select we <strong>keep only certain columns</strong> in our data</li>
</ul></li>
<li>Needs <strong>variable names</strong> as input
<ul>
<li>"keep only variables with this name"</li>
<li>Can also be used with the ! to drop certain variables</li>
</ul></li>
<li>Cave: if we want to extract one variable to calculate something, you will want to use <code>pull()</code> instead
<ul>
<li>Check <code>iris %&gt;% select(Species) %&gt;% class()</code> and <code>iris %&gt;% pull(Species) %&gt;% class()</code></li>
</ul></li>
</ul>
</div>
<div id="rename" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Rename<a href="dplyr.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is probably the most intuitively named function: It renames a variable in a data frame.
As input the function takes your new variable name, an equal sign and the old variable name.
This order is important, so if you run into an error, make sure that you are using <em>new_variable = old_variable</em>.
Also, you do not need quotes around your variable names.</p>
</div>
<div id="mutate" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Mutate<a href="dplyr.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>We also want the species to be capitalized in our data</li>
<li>We also want to add a new binary variable for whether a flower's petals are longer than 5.5 cm (1) or not (0)
<ul>
<li>for this, we use the <code>ifelse()</code> function:</li>
<li>Needs a logical as first input, then what to do if it's true, last what to do if it's false</li>
</ul></li>
<li>Mutate takes a <strong>variable name as input</strong> (existing or new) and some <strong>function or calculation</strong> to be done on that variable</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="dplyr.html#cb33-1" tabindex="-1"></a>iris_virginica <span class="ot">&lt;-</span> iris_virginica <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="dplyr.html#cb33-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="fu">toupper</span>(Species), <span class="co"># 4. change content of Species and add new binary variable bigboi</span></span>
<span id="cb33-3"><a href="dplyr.html#cb33-3" tabindex="-1"></a>         <span class="at">bigboi =</span> <span class="fu">ifelse</span>(plength <span class="sc">&gt;</span> <span class="fl">5.5</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb33-4"><a href="dplyr.html#cb33-4" tabindex="-1"></a></span>
<span id="cb33-5"><a href="dplyr.html#cb33-5" tabindex="-1"></a><span class="fu">table</span>(iris_virginica<span class="sc">$</span>Species)</span>
<span id="cb33-6"><a href="dplyr.html#cb33-6" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb33-7"><a href="dplyr.html#cb33-7" tabindex="-1"></a><span class="co"># VIRGINICA </span></span>
<span id="cb33-8"><a href="dplyr.html#cb33-8" tabindex="-1"></a><span class="co">#        50</span></span></code></pre></div>
</div>
<div id="group_by-summarize" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> group_by &amp; summarize<a href="dplyr.html#group_by-summarize" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>With the dplyr-workflow, we can easily output group statistics</li>
<li>Keywords: <strong>group_by()</strong> &amp; <strong>summarize()</strong></li>
<li>The code is built like any other dplyr workflow with pipes ( %&gt;% ) in between each:
<ol style="list-style-type: decimal">
<li>Define/ name the data frame</li>
<li>group_by(<em>variable_name</em>)</li>
<li>in summarize, define a name for the statistic, use a =, use a function like mean() for the measure</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="dplyr.html#cb34-1" tabindex="-1"></a><span class="fu">str</span>(Orange) <span class="co"># use different default data set</span></span>
<span id="cb34-2"><a href="dplyr.html#cb34-2" tabindex="-1"></a><span class="co"># Classes &#39;nfnGroupedData&#39;, &#39;nfGroupedData&#39;, &#39;groupedData&#39; and &#39;data.frame&#39;:    35 obs. of  3 variables:</span></span>
<span id="cb34-3"><a href="dplyr.html#cb34-3" tabindex="-1"></a><span class="co">#  $ Tree         : Ord.factor w/ 5 levels &quot;3&quot;&lt;&quot;1&quot;&lt;&quot;5&quot;&lt;&quot;2&quot;&lt;..: 2 2 2 2 2 2 2 4 4 4 ...</span></span>
<span id="cb34-4"><a href="dplyr.html#cb34-4" tabindex="-1"></a><span class="co">#  $ age          : num  118 484 664 1004 1231 ...</span></span>
<span id="cb34-5"><a href="dplyr.html#cb34-5" tabindex="-1"></a><span class="co">#  $ circumference: num  30 58 87 115 120 142 145 33 69 111 ...</span></span>
<span id="cb34-6"><a href="dplyr.html#cb34-6" tabindex="-1"></a><span class="co">#  - attr(*, &quot;formula&quot;)=Class &#39;formula&#39;  language circumference ~ age | Tree</span></span>
<span id="cb34-7"><a href="dplyr.html#cb34-7" tabindex="-1"></a><span class="co">#   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_EmptyEnv&gt; </span></span>
<span id="cb34-8"><a href="dplyr.html#cb34-8" tabindex="-1"></a><span class="co">#  - attr(*, &quot;labels&quot;)=List of 2</span></span>
<span id="cb34-9"><a href="dplyr.html#cb34-9" tabindex="-1"></a><span class="co">#   ..$ x: chr &quot;Time since December 31, 1968&quot;</span></span>
<span id="cb34-10"><a href="dplyr.html#cb34-10" tabindex="-1"></a><span class="co">#   ..$ y: chr &quot;Trunk circumference&quot;</span></span>
<span id="cb34-11"><a href="dplyr.html#cb34-11" tabindex="-1"></a><span class="co">#  - attr(*, &quot;units&quot;)=List of 2</span></span>
<span id="cb34-12"><a href="dplyr.html#cb34-12" tabindex="-1"></a><span class="co">#   ..$ x: chr &quot;(days)&quot;</span></span>
<span id="cb34-13"><a href="dplyr.html#cb34-13" tabindex="-1"></a><span class="co">#   ..$ y: chr &quot;(mm)&quot;</span></span>
<span id="cb34-14"><a href="dplyr.html#cb34-14" tabindex="-1"></a></span>
<span id="cb34-15"><a href="dplyr.html#cb34-15" tabindex="-1"></a>Orange <span class="sc">%&gt;%</span> </span>
<span id="cb34-16"><a href="dplyr.html#cb34-16" tabindex="-1"></a>  <span class="fu">group_by</span>(Tree) <span class="sc">%&gt;%</span> </span>
<span id="cb34-17"><a href="dplyr.html#cb34-17" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">m_age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb34-18"><a href="dplyr.html#cb34-18" tabindex="-1"></a>            <span class="at">m_circumference =</span> <span class="fu">mean</span>(circumference),</span>
<span id="cb34-19"><a href="dplyr.html#cb34-19" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb34-20"><a href="dplyr.html#cb34-20" tabindex="-1"></a><span class="co"># # A tibble: 5 × 4</span></span>
<span id="cb34-21"><a href="dplyr.html#cb34-21" tabindex="-1"></a><span class="co">#   Tree  m_age m_circumference     n</span></span>
<span id="cb34-22"><a href="dplyr.html#cb34-22" tabindex="-1"></a><span class="co">#   &lt;ord&gt; &lt;dbl&gt;           &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb34-23"><a href="dplyr.html#cb34-23" tabindex="-1"></a><span class="co"># 1 3      922.            94       7</span></span>
<span id="cb34-24"><a href="dplyr.html#cb34-24" tabindex="-1"></a><span class="co"># 2 1      922.            99.6     7</span></span>
<span id="cb34-25"><a href="dplyr.html#cb34-25" tabindex="-1"></a><span class="co"># 3 5      922.           111.      7</span></span>
<span id="cb34-26"><a href="dplyr.html#cb34-26" tabindex="-1"></a><span class="co"># 4 2      922.           135.      7</span></span>
<span id="cb34-27"><a href="dplyr.html#cb34-27" tabindex="-1"></a><span class="co"># 5 4      922.           139.      7</span></span></code></pre></div>
</div>
</div>
<div id="exercises-1" class="section level2 unnumbered hasAnchor">
<h2>Exercises<a href="dplyr.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="data-munging" class="section level3 unnumbered hasAnchor">
<h3>Data Munging<a href="dplyr.html#data-munging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Imagine we want to edit the iris data set for our colleagues from the US, who are interested in the petal width of the <strong>setosa</strong> and <strong>versicolor</strong> species.</p>
<ol style="list-style-type: decimal">
<li>Create a new dataset from <code>iris</code> with a meaningful name</li>
<li><code>select()</code> the variables of interest</li>
<li><code>filter()</code> the species that we want
<ul>
<li>Use %in% to filter by more than one value, or think about a reverse approach...!</li>
</ul></li>
<li><code>rename()</code> the Petal.Width variable to be named pwidth</li>
<li>Use <code>mutate()</code> to add a new variable named "pwidth_inch", which contains the petal width in inches
<ul>
<li>Calculation: pwidth / 2.54 (2.54 cm = 1 inch)</li>
</ul></li>
</ol>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="dplyr.html#cb35-1" tabindex="-1"></a>iris_twospec <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="dplyr.html#cb35-2" tabindex="-1"></a>  <span class="fu">select</span>(Petal.Width, Species) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="dplyr.html#cb35-3" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="dplyr.html#cb35-4" tabindex="-1"></a>  <span class="co"># or: filter(Species != &quot;virginica&quot;)</span></span>
<span id="cb35-5"><a href="dplyr.html#cb35-5" tabindex="-1"></a>  <span class="co"># or: filter(Species == c(&quot;setosa&quot; | &quot;versicolor&quot;))</span></span>
<span id="cb35-6"><a href="dplyr.html#cb35-6" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pwidth =</span> Petal.Width) <span class="sc">%&gt;%</span> </span>
<span id="cb35-7"><a href="dplyr.html#cb35-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pwidth_inch =</span> pwidth <span class="sc">/</span> <span class="fl">2.54</span>)</span>
<span id="cb35-8"><a href="dplyr.html#cb35-8" tabindex="-1"></a></span>
<span id="cb35-9"><a href="dplyr.html#cb35-9" tabindex="-1"></a><span class="fu">head</span>(iris_twospec, <span class="dv">8</span>)</span>
<span id="cb35-10"><a href="dplyr.html#cb35-10" tabindex="-1"></a><span class="co">#   pwidth Species pwidth_inch</span></span>
<span id="cb35-11"><a href="dplyr.html#cb35-11" tabindex="-1"></a><span class="co"># 1    0.2  setosa  0.07874016</span></span>
<span id="cb35-12"><a href="dplyr.html#cb35-12" tabindex="-1"></a><span class="co"># 2    0.2  setosa  0.07874016</span></span>
<span id="cb35-13"><a href="dplyr.html#cb35-13" tabindex="-1"></a><span class="co"># 3    0.2  setosa  0.07874016</span></span>
<span id="cb35-14"><a href="dplyr.html#cb35-14" tabindex="-1"></a><span class="co"># 4    0.2  setosa  0.07874016</span></span>
<span id="cb35-15"><a href="dplyr.html#cb35-15" tabindex="-1"></a><span class="co"># 5    0.2  setosa  0.07874016</span></span>
<span id="cb35-16"><a href="dplyr.html#cb35-16" tabindex="-1"></a><span class="co"># 6    0.4  setosa  0.15748031</span></span>
<span id="cb35-17"><a href="dplyr.html#cb35-17" tabindex="-1"></a><span class="co"># 7    0.3  setosa  0.11811024</span></span>
<span id="cb35-18"><a href="dplyr.html#cb35-18" tabindex="-1"></a><span class="co"># 8    0.2  setosa  0.07874016</span></span></code></pre></div>
</div>
<div class="float">
<img src="img/hadley-meme.png" height="200" alt="Hadley Wickham, developer of the tidyverse" />
<div class="figcaption">Hadley Wickham, developer of the tidyverse</div>
</div>
</div>
<div id="group-statistics" class="section level3 unnumbered hasAnchor">
<h3>Group Statistics<a href="dplyr.html#group-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Follow the structure to group the iris data set by Species and output a summary with the mean values of all four other variables in the data. <br>
Also include the grouped n.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="dplyr.html#cb36-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="dplyr.html#cb36-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="dplyr.html#cb36-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">m_plength =</span> <span class="fu">mean</span>(Petal.Length),</span>
<span id="cb36-4"><a href="dplyr.html#cb36-4" tabindex="-1"></a>            <span class="at">m_pwidth =</span> <span class="fu">mean</span>(Petal.Width),</span>
<span id="cb36-5"><a href="dplyr.html#cb36-5" tabindex="-1"></a>            <span class="at">m_slength =</span> <span class="fu">mean</span>(Sepal.Length),</span>
<span id="cb36-6"><a href="dplyr.html#cb36-6" tabindex="-1"></a>            <span class="at">m_swidth =</span> <span class="fu">mean</span>(Sepal.Width),</span>
<span id="cb36-7"><a href="dplyr.html#cb36-7" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb36-8"><a href="dplyr.html#cb36-8" tabindex="-1"></a><span class="co"># # A tibble: 3 × 6</span></span>
<span id="cb36-9"><a href="dplyr.html#cb36-9" tabindex="-1"></a><span class="co">#   Species    m_plength m_pwidth m_slength m_swidth     n</span></span>
<span id="cb36-10"><a href="dplyr.html#cb36-10" tabindex="-1"></a><span class="co">#   &lt;fct&gt;          &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb36-11"><a href="dplyr.html#cb36-11" tabindex="-1"></a><span class="co"># 1 setosa          1.46    0.246      5.01     3.43    50</span></span>
<span id="cb36-12"><a href="dplyr.html#cb36-12" tabindex="-1"></a><span class="co"># 2 versicolor      4.26    1.33       5.94     2.77    50</span></span>
<span id="cb36-13"><a href="dplyr.html#cb36-13" tabindex="-1"></a><span class="co"># 3 virginica       5.55    2.03       6.59     2.97    50</span></span></code></pre></div>
</div>
</div>
</div>
<div id="piping-hot" class="section level2 unnumbered hasAnchor">
<h2>Piping Hot %&gt;%<a href="dplyr.html#piping-hot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You already heard about the pipe operator in Section <a href="basics.html#pipe"><strong>??</strong></a>.
The pipe - available as a native R pipe |&gt; or a <code>tidyverse</code> pipe from the <code>magrittr</code> package %&gt;%<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> - takes the input from the left-hand to the right-hand.
In simpler terms, it takes the operation you did before the pipe and uses is as input for the function after the pipe.
This keeps our code readable and tidy and allows us to keep edits in separate lines, but we still only have to run one command for every task we need
It's easy to add new commands by using another pipe operator, or to leave edits out but commenting out the respective line of code.</p>
<p>It is important to say that most things can be achieved with or without pipe and you may prefer different versions for different tasks.
You have seen a basic example of the use of the pipe operator in Section <a href="basics.html#pipe"><strong>??</strong></a>, so now we will look at a more sophisticated example: We will perform similar operations as we did above and code them first with pipe and then without.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="dplyr.html#cb37-1" tabindex="-1"></a><span class="co"># With pipe</span></span>
<span id="cb37-2"><a href="dplyr.html#cb37-2" tabindex="-1"></a>iris_edit <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="dplyr.html#cb37-3" tabindex="-1"></a> <span class="fu">filter</span>(Petal.Length <span class="sc">&gt;</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="co"># only big petals</span></span>
<span id="cb37-4"><a href="dplyr.html#cb37-4" tabindex="-1"></a> <span class="fu">select</span>(Species, Petal.Length, Sepal.Length) <span class="sc">%&gt;%</span>  <span class="co"># only those columns</span></span>
<span id="cb37-5"><a href="dplyr.html#cb37-5" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">random_calculation =</span> Petal.Length <span class="sc">*</span> Sepal.Length) <span class="co"># calculate random new variable</span></span>
<span id="cb37-6"><a href="dplyr.html#cb37-6" tabindex="-1"></a></span>
<span id="cb37-7"><a href="dplyr.html#cb37-7" tabindex="-1"></a><span class="co"># Without pipe - two versions </span></span>
<span id="cb37-8"><a href="dplyr.html#cb37-8" tabindex="-1"></a>iris_edit2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(iris, Petal.Length <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb37-9"><a href="dplyr.html#cb37-9" tabindex="-1"></a>iris_edit2 <span class="ot">&lt;-</span> <span class="fu">select</span>(iris_edit2, Species, Petal.Length, Sepal.Length)</span>
<span id="cb37-10"><a href="dplyr.html#cb37-10" tabindex="-1"></a>iris_edit2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(iris_edit2, <span class="at">random_calculation =</span> Petal.Length <span class="sc">*</span> Sepal.Length)</span>
<span id="cb37-11"><a href="dplyr.html#cb37-11" tabindex="-1"></a></span>
<span id="cb37-12"><a href="dplyr.html#cb37-12" tabindex="-1"></a>iris_edit3 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(</span>
<span id="cb37-13"><a href="dplyr.html#cb37-13" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb37-14"><a href="dplyr.html#cb37-14" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb37-15"><a href="dplyr.html#cb37-15" tabindex="-1"></a>      iris, Petal.Length <span class="sc">&gt;</span> <span class="dv">3</span></span>
<span id="cb37-16"><a href="dplyr.html#cb37-16" tabindex="-1"></a>    ),</span>
<span id="cb37-17"><a href="dplyr.html#cb37-17" tabindex="-1"></a>    Species, Petal.Length, Sepal.Length</span>
<span id="cb37-18"><a href="dplyr.html#cb37-18" tabindex="-1"></a>  ), </span>
<span id="cb37-19"><a href="dplyr.html#cb37-19" tabindex="-1"></a>  <span class="at">random_calculation =</span> Petal.Length <span class="sc">*</span> Sepal.Length</span>
<span id="cb37-20"><a href="dplyr.html#cb37-20" tabindex="-1"></a>)</span>
<span id="cb37-21"><a href="dplyr.html#cb37-21" tabindex="-1"></a></span>
<span id="cb37-22"><a href="dplyr.html#cb37-22" tabindex="-1"></a><span class="co"># Are the three versions equal?</span></span>
<span id="cb37-23"><a href="dplyr.html#cb37-23" tabindex="-1"></a><span class="fu">all.equal</span>(iris_edit, iris_edit2) <span class="sc">&amp;</span> <span class="fu">all.equal</span>(iris_edit, iris_edit3)</span>
<span id="cb37-24"><a href="dplyr.html#cb37-24" tabindex="-1"></a><span class="co"># [1] TRUE</span></span></code></pre></div>
<p>As you can see, all three version produce the same output and all are technically correct.
However, in the second example we keep re-assigning new edits to the same data frame (would be even more annoying but possible to assign each edit to a new data frame) and the third version is just quite the nightmare to read if you ask me.
Also think about this:</p>
<blockquote>
<p><i class="fa-solid fa-lightbulb" style="color: yellow;"></i>
In the part with pipe we used the <code>iris</code> data to edit and assigned it to <code>iris_edit</code>.
In version two without pipe we used <code>iris</code> in the first line, but afterwards we used <code>iris_edit2</code> for assignments and edits. <br>
Why is that?</p>
</blockquote>
<div class="webex-solution">
<button>
<i class='fa-solid fa-lightbulb' style='color: yellow;'></i>
</button>
<p>If we were to use <code>iris</code> in each line, it would overwrite the last edit every time.</p>
</div>
<p>We can also profit from the pipe in base-R or with a larger combination of different functions.
Usually, the pipe helps us not to drown in parentheses when conducting analyses.
Let's e.g. calculate a mean value after filtering by Species setosa.</p>
<p>So without a pipe, it might look like this:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="dplyr.html#cb38-1" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(iris<span class="sc">$</span>Petal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>]), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb38-2"><a href="dplyr.html#cb38-2" tabindex="-1"></a><span class="co"># [1] 1.46</span></span></code></pre></div>
<p>Using all pipes, the code would look a lot longer but still easier to read.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="dplyr.html#cb39-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="dplyr.html#cb39-2" tabindex="-1"></a><span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="dplyr.html#cb39-3" tabindex="-1"></a><span class="fu">pull</span>(Petal.Length) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="dplyr.html#cb39-4" tabindex="-1"></a><span class="fu">mean</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb39-5"><a href="dplyr.html#cb39-5" tabindex="-1"></a><span class="co"># [1] 1.46</span></span></code></pre></div>
<p>As a third alternative, we might also use a combination of the approaches, such as:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="dplyr.html#cb40-1" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">filter</span>(iris, Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Length)), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb40-2"><a href="dplyr.html#cb40-2" tabindex="-1"></a><span class="co"># [1] 1.46</span></span></code></pre></div>
<p>As with most things in R and programming, different approaches may be easier in different situations, so it has merit to think outside the box at times!</p>
<blockquote>
<p>Brainteaser <i class="fa-solid fa-lightbulb" style="color: yellow;"></i>:
We want to edit the iris data to rename a Petal.Length to pl and mutate it to be multiplied by ten.
Why does the first version work, but not the second one?</p>
</blockquote>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="dplyr.html#cb41-1" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb41-2"><a href="dplyr.html#cb41-2" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="dplyr.html#cb41-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Petal.Length =</span> Petal.Length <span class="sc">*</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="dplyr.html#cb41-4" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pl =</span> Petal.Length) <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="dplyr.html#cb41-5" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb41-6"><a href="dplyr.html#cb41-6" tabindex="-1"></a></span>
<span id="cb41-7"><a href="dplyr.html#cb41-7" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb41-8"><a href="dplyr.html#cb41-8" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb41-9"><a href="dplyr.html#cb41-9" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pl =</span> Petal.Length) <span class="sc">%&gt;%</span> </span>
<span id="cb41-10"><a href="dplyr.html#cb41-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Petal.Length =</span> Petal.Length <span class="sc">*</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-11"><a href="dplyr.html#cb41-11" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<div class="webex-solution">
<button>
<i class='fa-solid fa-lightbulb' style='color: yellow;'></i>
</button>
<p>In the second version, we rename the variable Petal.Length to pl and afterwards try to access it with its old name.</p>
</div>
</div>
<div id="wrapupdplyr" class="section level2 unnumbered hasAnchor">
<h2>Wrap-Up &amp; Further Resources<a href="dplyr.html#wrapupdplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<i class="fa-solid fa-anchor" style="color: teal;"></i>
<ul style="color: teal;">
<li>
Packages make working with R easier
</li>
<li>
<code>dplyr</code> is a powerful tool for editing data (<em>select, filter, mutate...</em>)
<li>
The pipe %&gt;% makes your code clearer and "follows the thought process"
</li>
</ul>
<p><br></p>
<i class="fa-solid fa-book" style="color: orange;"></i>
<ul style="color: orange;">
<li>
<a href="https://r4ds.hadley.nz/" target="_blank">R for Data Science</a> Book
</li>
<li>
<a href="https://dplyr.tidyverse.org/" target="_blank">dplyr vignette</a>
</li>
<li>
<a href="https://r4ds.hadley.nz/data-transform.html#sec-the-pipe" target="_blank">Pipe operator</a>
</li>
<li>
Cheatsheet: <a href="https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf" target="_blank">https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf</a>
</li>
<li>
<a href="https://www.youtube.com/watch?v=npOf6aXdguY&amp;ab_channel=RichardOnData" target="_blank">YouTube: 20 R Packages that you should know</a> - you for sure don't need them all, but there are some nice inspirations for working with packages in there
</li>
</ul>
<div class="float" id="id">
<img src="img/idiotic.png" class="class" height="400" alt="Which idiot..." />
<div class="figcaption">Which idiot...</div>
</div>
<figcaption style="font-size: 7pt;">
<a href="https://programmerhumor.io/debugging-memes/well-played-3/" target="_blank">https://programmerhumor.io/debugging-memes/well-played-3/</a>
</figcaption>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>Being able to read your own code after a while is already challenging but try making sense of code that someone else has written!<a href="dplyr.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>The two pipes can pretty much the same operations - for specific differences see <a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/" class="uri">https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/</a><a href="dplyr.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="best-practice.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["instapaper", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/the-tave/psych_research_with_r/issues/04_dplyr_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
